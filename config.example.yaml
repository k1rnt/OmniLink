general:
  listen_addr: "127.0.0.1:1080"
  logging: true
  log_level: info

proxies:
  - name: my-socks5
    protocol: !Socks5
    address: "proxy.example.com"
    port: 1080
    # Credentials are stored in OS keychain. Set with:
    #   omnilink credential set my-socks5 -u user -p pass
    has_auth: true

  - name: my-http
    protocol: !Http
    address: "httpproxy.example.com"
    port: 8080

  - name: my-ssh
    protocol: !SshTunnel
    address: "ssh.example.com"
    port: 22
    has_auth: true

chains:
  - name: double-hop
    proxies:
      - my-socks5
      - my-http
    mode: !strict    # strict | failover | round_robin | random

rules:
  - name: block-ads
    conditions:
      - !domain "*.ads.example.com;*.tracking.com"
    action: !block
    priority: 100
    enabled: true

  - name: proxy-browsers
    conditions:
      - !process_name "chrome;firefox;safari"
    action:
      !proxy my-socks5
    priority: 50
    enabled: true

  - name: direct-local
    conditions:
      - !cidr "192.168.0.0/16"
    action: !direct
    priority: 50
    enabled: true

dns:
  mode: !fake_ip

default_action: !direct
